<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="hr_leave_planner_form_view"
            model='ir.ui.view'>
        <field name="name">hr.leave.planner.form</field>
        <field name="model">hr.leave</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button string="Approve" name="action_approve"
                            type="object" class="oe_highlight"
                            invisible="not can_approve or state != 'confirm'" />
                    <button string="Validate" name="action_validate"
                            invisible="state != 'validate1'"
                            type="object"
                            groups="hr_holidays.group_hr_holidays_user"
                            class="oe_highlight" />
                    <button string="Refuse" name="action_refuse"
                            type="object"
                            invisible="not can_approve or state not in ('confirm', 'validate1', 'validate')" />
                    <button string="Cancel" name="action_cancel"
                            type="object"
                            invisible="state == 'cancel' or not can_cancel" />
                    <button string="Reset"
                            name="action_reset_confirm"
                            type="object"
                            invisible="not can_reset or state not in ['cancel', 'refuse']" />
                    <button string="Go Back"
                            name="%(hr_holidays.hr_leave_action_my)d"
                            type="action"
                            invisible="state not in ['validate1', 'validate']" />
                    <field name="state" widget="statusbar"
                           statusbar_visible="confirm,validate,cancel" />
                </header>
                <sheet>
                    <group>
                        <field name="holiday_status_id" />
                        <label for="request_date_from" string="Date" />
                        <div class="row">
                            <field name='request_date_from'
                                   widget="daterange" class="oe_inline"
                                   options="{'end_date_field': 'request_date_to'}" />
                        </div>
                        <field name="duration_display" />
                        <field name="acting_person_id" />
                        <field name="leave_reason" />
                        <field name="employee_id" invisible="1" />
                    </group>
                </sheet>
            </form> 
        </field>
    </record>

    <record id="hr_leave_planner_list_view"
            model='ir.ui.view'>
        <field name="name">hr.leave.planner.form</field>
        <field name="model">hr.leave</field>
        <field name="arch" type="xml">
            <list>
                <field name="holiday_status_id" />
                <field name='request_date_from' />
                <field name="duration_display" />
                <field name="acting_person_id" />
                <field name="leave_reason" />
            </list> 
        </field>
    </record>

    <record id="hr_leave_planner_action"
            model="ir.actions.act_window">
        <field name="name">My Time Off</field>
        <field name="res_model">hr.leave</field>
        <field name="view_mode">list,form</field>
        <field name="view_ids"
               eval="[Command.clear(), Command.create({'view_mode': 'list', 'view_id': ref('hr_leave_planner_list_view')}),
                Command.create({'view_mode': 'form', 'view_id': ref('hr_leave_planner_form_view')})]" />
        <field name="domain">[('user_id', '=', uid)]</field>
    </record>

    <menuitem id="hr_leave_planner_submenu"
              name="Planner"
              parent="hr_holidays.menu_hr_holidays_my_leaves"
              action="hr_leave_planner_action" />
</odoo>